# PowerShell script to compile, simulate Verilog code and open the VCD file in GTKWave


#fileName 
$fileName = "tbDivBy2or3"

# Paths to your Verilog files
$verilogFiles = "tb_div2or3.v"

# Output executable name
$outputVVP = "$fileName.vvp"

# VCD file generated by the simulation
$vcdFile = "$fileName.vcd"

# Compile the Verilog files using Icarus Verilog
Write-Host "Compiling Verilog files..."
& iverilog -o $outputVVP -i $verilogFiles

# Check if the compilation was successful
if ($LASTEXITCODE -eq 0) {
    Write-Host "Compilation successful. Running the simulation..."

    # Run the simulation
    & vvp $outputVVP

    # Check if the simulation was successful
    if ($LASTEXITCODE -eq 0) {
        Write-Host "Simulation successful. Opening GTKWave..."

        # Open the VCD file with GTKWave
        & gtkwave $vcdFile
    } else {
        Write-Host "Simulation failed."
    }
} else {
    Write-Host "Compilation failed."
}
